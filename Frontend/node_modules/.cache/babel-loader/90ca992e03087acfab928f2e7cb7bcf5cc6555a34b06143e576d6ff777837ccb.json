{"ast":null,"code":"import _slicedToArray from\"/home/gradjaku/Documents/LangApp/1.0/LangApp23/Frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import entries from'./services/entries';import styles from'./FileUpload.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function FileUpload(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),selectedFile=_useState2[0],setSelectedFile=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),statusOfUpload=_useState4[0],setStatusOfUpload=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newAuthor=_useState6[0],setNewAuthor=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),newTitle=_useState8[0],setNewTitle=_useState8[1];useEffect(function(){// This effect will run when the statusOfUpload changes\nif(statusOfUpload==='Uploading to Mongo...'){// Start a timer to update the status message every second\nvar timer=setInterval(function(){setStatusOfUpload(function(prevStatus){if(prevStatus.endsWith('...')){return'Uploading to Mongo';}return prevStatus+'.';});},1000);// Clear the timer when the status changes to something else\nreturn function(){return clearInterval(timer);};}},[statusOfUpload]);var handleFileChange=function handleFileChange(event){setSelectedFile(event.target.files[0]);};var handleMongo=function handleMongo(){var text={\"title\":\"Mongoid\",\"author\":\"fellow kid\",\"pages\":{\"1\":\"Hansin tavallinen päivä. aakkosellisuus Aakko Herään arkisin aina kello 7. Pidän rauhallisista aamuista, joten herään yleensä ajoissa. Viikonloppuisin saatan nukkua hieman pidempään. Aamulla teen aamupalaa ja keitän kahvin. Aamupalaa syön lukiessa päivän lehteä. Yleensä syön kaurapuuroa lisukkeilla, mutta joskus saatan tehdä voileivän tai syödä jugurttia myslillä.Sitten vaihdan vaatteet ja valmistaudun työpäivään. Työpäivä alkaa kello 9, joten lähden kotoa aina kello 8:30. Menen töihin linja-autolla. Aamuisin on yleensä ruuhkaa ja bussi on melkein aina täynnä. Joskus olen töissä vasta kello 9:10. Päivällä käyn työkavereiden kanssa lounaalla ravintolassa. Olen töissä kello 17 asti. Onneksi en jää koskaan ylitöihin. Töiden jälkeen hoidan usein keskustassa asioita, käyn kaupassa tai tapaan ystäviä. Sitten menen kotiin. Joskus käyn illalla kuntosalilla, katson televisiota tai luen kirjaa. Joskus teen vähän töitä kotona illalla. Joko minä tai tyttöystäväni tekee illallisen - yleensä vuorottelemme. Illalla katsomme aina kymmenen uutiset ja sen jälkeen aloitamme iltapuuhat ja menemme nukkumaan.\"},\"pageTranslations\":{\"1\":{\"Hansin\":\"Hansi\",\"tavallinen\":\"tavallinen\",\"päivä\":\"päivä\"}}};entries.create(text).then(function(res){return console.log(\"Response from handle mongo: \",res);}).catch(function(err){return console.log(\"Handle mongo failed: \",err);});};var handleUpload=function handleUpload(){if(selectedFile){var formData=new FormData();formData.append('file',selectedFile);if(newAuthor==''||newTitle==''){return;}setStatusOfUpload('Uploading to Mongo...');//const endpoint = `http://127.0.0.1:5000/upload`\nvar endpoint=\"https://langapp23flask.onrender.com/upload\";fetch(endpoint,{method:'POST',body:formData}).then(function(response){return response.json();}).then(function(data){setStatusOfUpload('Upload completed successfully!');console.log(data);// Access the response from Flask\nconsole.log(\"data.message, \",data.message);console.log(\"data.dict, \",data.dict);console.log(\"data.text, \",data.text);setStatusOfUpload(data.message);var text={\"title\":newTitle,\"author\":newAuthor,\"pages\":{\"1\":data.text},\"pageTranslations\":{\"1\":data.dict}};entries.create(text).then(function(res){return console.log(\"Response from handle mongo: \",res);}).catch(function(err){return console.log(\"Handle mongo failed: \",err);});// You can update the React state or perform any other actions based on the response.\n}).catch(function(error){console.error('Error occurred while uploading the file:',error);});}};var handleTitleChange=function handleTitleChange(event){setNewTitle(event.target.value);};var handleAuthorChange=function handleAuthorChange(event){setNewAuthor(event.target.value);};return/*#__PURE__*/_jsxs(\"div\",{className:styles.container,children:[/*#__PURE__*/_jsx(\"p\",{className:statusOfUpload===\"\"?\"\":styles.status,children:statusOfUpload}),/*#__PURE__*/_jsx(\"div\",{className:styles['input-group'],children:/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleFileChange})}),/*#__PURE__*/_jsxs(\"div\",{className:styles['input-group'],children:[/*#__PURE__*/_jsx(\"input\",{onChange:handleAuthorChange,type:\"text\",placeholder:\"Author. Don't use spaces! Sorry...\",value:newAuthor}),/*#__PURE__*/_jsx(\"input\",{onChange:handleTitleChange,type:\"text\",placeholder:\"Title, also with no spaces :o\",value:newTitle})]}),/*#__PURE__*/_jsx(\"div\",{className:styles['input-group'],children:/*#__PURE__*/_jsx(\"button\",{onClick:handleUpload,children:\"Upload\"})})]});}export default FileUpload;","map":{"version":3,"names":["React","useState","useEffect","entries","styles","FileUpload","selectedFile","setSelectedFile","statusOfUpload","setStatusOfUpload","newAuthor","setNewAuthor","newTitle","setNewTitle","timer","setInterval","prevStatus","endsWith","clearInterval","handleFileChange","event","target","files","handleMongo","text","create","then","res","console","log","catch","err","handleUpload","formData","FormData","append","endpoint","fetch","method","body","response","json","data","message","dict","error","handleTitleChange","value","handleAuthorChange","container","status"],"sources":["/home/gradjaku/Documents/LangApp/1.0/LangApp23/Frontend/src/FileUpload.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport entries from './services/entries';\nimport styles from './FileUpload.module.css';\n\n\nfunction FileUpload() {\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [statusOfUpload, setStatusOfUpload] = useState('');\n  const [newAuthor, setNewAuthor] = useState('');\n  const [newTitle, setNewTitle] = useState('');\n\n  useEffect(() => {\n    // This effect will run when the statusOfUpload changes\n    if (statusOfUpload === 'Uploading to Mongo...') {\n      // Start a timer to update the status message every second\n      const timer = setInterval(() => {\n        setStatusOfUpload((prevStatus) => {\n          if (prevStatus.endsWith('...')) {\n            return 'Uploading to Mongo';\n          }\n          return prevStatus + '.';\n        });\n      }, 1000);\n\n      // Clear the timer when the status changes to something else\n      return () => clearInterval(timer);\n    }\n  }, [statusOfUpload]);\n\n  const handleFileChange = (event) => {\n    setSelectedFile(event.target.files[0]);\n  };\n\n  const handleMongo = () => {\n    const text = {\n      \"title\":\"Mongoid\",\n      \"author\":\"fellow kid\",\n      \"pages\": {\n        \"1\":\"Hansin tavallinen päivä. aakkosellisuus Aakko Herään arkisin aina kello 7. Pidän rauhallisista aamuista, joten herään yleensä ajoissa. Viikonloppuisin saatan nukkua hieman pidempään. Aamulla teen aamupalaa ja keitän kahvin. Aamupalaa syön lukiessa päivän lehteä. Yleensä syön kaurapuuroa lisukkeilla, mutta joskus saatan tehdä voileivän tai syödä jugurttia myslillä.Sitten vaihdan vaatteet ja valmistaudun työpäivään. Työpäivä alkaa kello 9, joten lähden kotoa aina kello 8:30. Menen töihin linja-autolla. Aamuisin on yleensä ruuhkaa ja bussi on melkein aina täynnä. Joskus olen töissä vasta kello 9:10. Päivällä käyn työkavereiden kanssa lounaalla ravintolassa. Olen töissä kello 17 asti. Onneksi en jää koskaan ylitöihin. Töiden jälkeen hoidan usein keskustassa asioita, käyn kaupassa tai tapaan ystäviä. Sitten menen kotiin. Joskus käyn illalla kuntosalilla, katson televisiota tai luen kirjaa. Joskus teen vähän töitä kotona illalla. Joko minä tai tyttöystäväni tekee illallisen - yleensä vuorottelemme. Illalla katsomme aina kymmenen uutiset ja sen jälkeen aloitamme iltapuuhat ja menemme nukkumaan.\"  \n    },\n    \"pageTranslations\": {\n        \"1\":{\n            \"Hansin\":\"Hansi\",\n            \"tavallinen\":\"tavallinen\",\n            \"päivä\":\"päivä\"\n        }\n    }\n    }\n    entries\n      .create(text)\n      .then(res =>\n        console.log(\"Response from handle mongo: \",res))\n      .catch(err => \n        console.log(\"Handle mongo failed: \",err))\n  }\n\n  const handleUpload = () => {\n    if (selectedFile) {\n      const formData = new FormData();\n      formData.append('file', selectedFile);\n      if (newAuthor == '' || newTitle == '') {\n        return\n      }\n      setStatusOfUpload('Uploading to Mongo...');\n      //const endpoint = `http://127.0.0.1:5000/upload`\n      const endpoint = `https://langapp23flask.onrender.com/upload`;\n      fetch(endpoint, {\n        method: 'POST',\n        body: formData,\n      })\n      .then((response) => response.json())\n      .then((data) => {\n        setStatusOfUpload('Upload completed successfully!');\n        console.log(data); // Access the response from Flask\n        console.log(\"data.message, \", data.message); \n        console.log(\"data.dict, \", data.dict); \n        console.log(\"data.text, \", data.text); \n        setStatusOfUpload(data.message)\n        const text = {\n          \"title\":newTitle,\n          \"author\":newAuthor,\n          \"pages\": {\n            \"1\":data.text  \n        },\n        \"pageTranslations\": {\n            \"1\":data.dict\n        }\n      }\n        entries\n          .create(text)\n          .then(res =>\n            console.log(\"Response from handle mongo: \",res))\n          .catch(err => \n            console.log(\"Handle mongo failed: \",err))\n        \n        // You can update the React state or perform any other actions based on the response.\n      })\n        .catch((error) => {\n          console.error('Error occurred while uploading the file:', error);\n        });\n    }\n  };\n\n  const handleTitleChange = (event) => {\n    setNewTitle(event.target.value);\n  };\n\n  const handleAuthorChange = (event) => {\n    setNewAuthor(event.target.value);\n  };\n\n  return (\n    <div className={styles.container}>\n      <p className={statusOfUpload === \"\" ? \"\" : styles.status}>{\n      statusOfUpload\n      }</p>\n      <div className={styles['input-group']}>\n        <input type=\"file\" onChange={handleFileChange} />\n      </div>\n      <div className={styles['input-group']}>\n        <input\n          onChange={handleAuthorChange}\n          type=\"text\"\n          placeholder=\"Author. Don't use spaces! Sorry...\"\n          value={newAuthor}\n        />\n        <input\n          onChange={handleTitleChange}\n          type=\"text\"\n          placeholder=\"Title, also with no spaces :o\"\n          value={newTitle}\n        />\n      </div>\n      <div className={styles['input-group']}>\n        <button onClick={handleUpload}>Upload</button>\n        {/*<button onClick={handleMongo}>Mongo!</button>*/}\n      </div>\n    </div>\n  );\n}\n\nexport default FileUpload;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}